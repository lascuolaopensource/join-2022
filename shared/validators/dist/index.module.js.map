{"version":3,"file":"index.module.js","sources":["../src/utils.ts","../src/index.ts"],"sourcesContent":["import * as yup from \"yup\";\n\nexport const re = {\n  url: /^(http:\\/\\/www\\.|https:\\/\\/www\\.|http:\\/\\/|https:\\/\\/)?[a-z0-9]+([\\-\\.]{1}[a-z0-9]+)*\\.[a-z]{2,5}(:[0-9]{1,5})?(\\/.*)?$/,\n  cf: /^(?:[A-Z][AEIOU][AEIOUX]|[AEIOU]X{2}|[B-DF-HJ-NP-TV-Z]{2}[A-Z]){2}(?:[\\dLMNP-V]{2}(?:[A-EHLMPR-T](?:[04LQ][1-9MNP-V]|[15MR][\\dLMNP-V]|[26NS][0-8LMNP-U])|[DHPS][37PT][0L]|[ACELMRT][37PT][01LM]|[AC-EHLMPR-T][26NS][9V])|(?:[02468LNQSU][048LQU]|[13579MPRTV][26NS])B[26NS][9V])(?:[A-MZ][1-9MNP-V][\\dLMNP-V]{2}|[A-M][0L](?:[1-9MNP-V][\\dLMNP-V]|[0L][1-9MNP-V]))[A-Z]$/,\n};\n\nexport function thenReq(value: boolean | string) {\n  return {\n    is: value,\n    then: (schema: yup.AnySchema) => schema.required(),\n    otherwise: (schema: yup.AnySchema) => schema.nullable(),\n  };\n}\n","import * as yup from \"yup\";\nimport { re, thenReq } from \"./utils\";\n\n/**\n * Util\n */\n\nexport const urlVal = yup.string().matches(re.url);\nexport const cfVal = yup.string().matches(re.cf);\n\n/**\n * Contacts\n */\n\nexport const userVal = yup\n  .object({\n    exists: yup.boolean().required(),\n    data: yup\n      .object({\n        email: yup.string().email().required(),\n        name: yup.string().required(),\n        surname: yup.string().required(),\n      })\n      .when(\"exists\", thenReq(false)),\n  })\n  .required();\n\nexport const phoneVal = yup.string().required();\n\n/**\n * Evaluation\n */\n\nexport const evaluationVal = yup.object({\n  letterNeeded: yup.boolean().required(),\n  letter: yup.string().when(\"letterNeeded\", thenReq(true)),\n  portfolioNeeded: yup.boolean().required(),\n  portfolio: urlVal.when(\"portfolioNeeded\", thenReq(true)),\n  cvNeeded: yup.boolean().required(),\n  cv: urlVal.when(\"cvNeeded\", thenReq(true)),\n});\n\n/**\n * Billing\n */\n\nexport const addressVal = yup\n  .object({\n    cap: yup.string().required(),\n    town: yup.string().required(),\n    province: yup.string().required(),\n    street: yup.string().required(),\n  })\n  .required();\n\nexport const billingOptions = [\"me\", \"person\", \"company\"];\n\nexport const billingVal = yup.object({\n  billingOption: yup.string().oneOf(billingOptions).required(),\n  // Me\n  me: yup\n    .object({\n      cf: cfVal,\n    })\n    .when(\"billingOption\", thenReq(billingOptions[0])),\n  // Persona fisica\n  person: yup\n    .object({\n      name: yup.string().required(),\n      surname: yup.string().required(),\n      cf: cfVal,\n    })\n    .when(\"billingOption\", thenReq(billingOptions[1])),\n  // Azienda\n  company: yup\n    .object({\n      name: yup.string().required(),\n      vat: yup.string().required(),\n      sdi: yup.string().required(),\n    })\n    .when(\"billingOption\", thenReq(billingOptions[2])),\n  // Generici\n  email: yup\n    .string()\n    .email()\n    .when(\"billingOption\", {\n      is: billingOptions[0],\n      then: (schema: yup.AnySchema) => schema.nullable(),\n      otherwise: (schema: yup.AnySchema) => schema.required(),\n    }),\n  address: addressVal,\n});\n\n/**\n * Form validator\n */\n\nexport const enrollVal = yup\n  .object({\n    user: userVal,\n    evaluationNeeded: yup.boolean().required(),\n    evaluation: evaluationVal.when(\"evaluationNeeded\", thenReq(true)),\n    billingNeeded: yup.boolean().required(),\n    billing: billingVal.when(\"billingNeeded\", thenReq(true)),\n  })\n  .required();\n"],"names":["re","url","cf","thenReq","value","is","then","schema","required","otherwise","nullable","urlVal","yup","string","matches","cfVal","userVal","object","exists","data","email","name","surname","when","phoneVal","evaluationVal","letterNeeded","letter","portfolioNeeded","portfolio","cvNeeded","cv","addressVal","cap","town","province","street","billingOptions","billingVal","billingOption","oneOf","me","person","company","vat","sdi","address","enrollVal","user","evaluationNeeded","evaluation","billingNeeded","billing"],"mappings":"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"}