{"version":3,"file":"index.cjs","sources":["../src/validators/utils.ts","../src/validators/index.ts"],"sourcesContent":["import * as yup from \"yup\";\n\nexport const re = {\n  url: /^(http:\\/\\/www\\.|https:\\/\\/www\\.|http:\\/\\/|https:\\/\\/)?[a-z0-9]+([\\-\\.]{1}[a-z0-9]+)*\\.[a-z]{2,5}(:[0-9]{1,5})?(\\/.*)?$/,\n  cf: /^(?:[A-Z][AEIOU][AEIOUX]|[AEIOU]X{2}|[B-DF-HJ-NP-TV-Z]{2}[A-Z]){2}(?:[\\dLMNP-V]{2}(?:[A-EHLMPR-T](?:[04LQ][1-9MNP-V]|[15MR][\\dLMNP-V]|[26NS][0-8LMNP-U])|[DHPS][37PT][0L]|[ACELMRT][37PT][01LM]|[AC-EHLMPR-T][26NS][9V])|(?:[02468LNQSU][048LQU]|[13579MPRTV][26NS])B[26NS][9V])(?:[A-MZ][1-9MNP-V][\\dLMNP-V]{2}|[A-M][0L](?:[1-9MNP-V][\\dLMNP-V]|[0L][1-9MNP-V]))[A-Z]$/,\n};\n\nexport function thenReq(value: boolean | string) {\n  return {\n    is: value,\n    then: (schema: yup.AnySchema) => schema.required(),\n    otherwise: (schema: yup.AnySchema) => schema.nullable(),\n  };\n}\n\nexport function thenNull(value: boolean | string) {\n  return {\n    is: value,\n    then: (schema: yup.AnySchema) => schema.nullable(),\n    otherwise: (schema: yup.AnySchema) => schema.required(),\n  };\n}\n","import * as yup from \"yup\";\nimport { boolean } from \"yup/lib/locale\";\nimport { re, thenReq, thenNull } from \"./utils\";\n\n/**\n * Util\n */\n\nexport const urlVal = yup.string().matches(re.url);\nexport const cfVal = yup.string().matches(re.cf);\n\n/**\n * User\n */\n\nexport const userVal = yup.object({\n  email: yup.string().email().required(),\n  name: yup.string().required(),\n  surname: yup.string().required(),\n});\n\nexport interface FUser {\n  email: string;\n  name: string;\n  surname: string;\n}\n\n/**\n * Contacts\n */\n\nexport const contactsVal = yup.object({\n  userExists: yup.boolean().required(),\n  user: userVal.when(\"userExists\", thenReq(false)),\n  phone: yup.string().required(),\n});\n\nexport interface FContacts {\n  userExists: boolean;\n  user: FUser;\n  phone: string;\n}\n\n/**\n * Evaluation\n */\n\nexport const evaluationVal = yup.object({\n  letterNeeded: yup.boolean().required(),\n  letter: yup.string().when(\"letterNeeded\", thenReq(true)),\n  portfolioNeeded: yup.boolean().required(),\n  portfolio: urlVal.when(\"portfolioNeeded\", thenReq(true)),\n  cvNeeded: yup.boolean().required(),\n  cv: urlVal.when(\"cvNeeded\", thenReq(true)),\n});\n\nexport interface FEvaluation {\n  letterNeeded: boolean;\n  letter: string;\n  portfolioNeeded: boolean;\n  portfolio: string;\n  cvNeeded: boolean;\n  cv: string;\n}\n/**\n * Address\n */\n\nexport const addressVal = yup.object({\n  cap: yup.string().required(),\n  town: yup.string().required(),\n  province: yup.string().required(),\n  street: yup.string().required(),\n});\n\nexport interface FAddress {\n  cap: string;\n  town: string;\n  province: string;\n  street: string;\n}\n\n/**\n * Billing\n */\n\nexport const billingOptions = [\"me\", \"person\", \"company\"] as const;\ntype BillingOptions = typeof billingOptions[number];\n\nexport const billingVal = yup.object({\n  billingOption: yup\n    .string()\n    .oneOf(billingOptions as any)\n    .required(),\n  // Me\n  me: yup\n    .object({\n      cf: cfVal,\n    })\n    .when(\"billingOption\", thenReq(billingOptions[0])),\n  // Persona fisica\n  person: yup\n    .object({\n      name: yup.string().required(),\n      surname: yup.string().required(),\n      cf: cfVal,\n    })\n    .when(\"billingOption\", thenReq(billingOptions[1])),\n  // Azienda\n  company: yup\n    .object({\n      name: yup.string().required(),\n      vat: yup.string().required(),\n      sdi: yup.string().required(),\n    })\n    .when(\"billingOption\", thenReq(billingOptions[2])),\n  // Generici\n  email: yup\n    .string()\n    .email()\n    .when(\"billingOption\", thenNull(billingOptions[0])),\n  address: addressVal.required(),\n});\n\nexport interface FBilling {\n  billingOption: BillingOptions;\n  me: {\n    cf: string;\n  };\n  person: {\n    name: string;\n    surname: string;\n    cf: string;\n  };\n  company: {\n    name: string;\n    vat: string;\n    sdi: string;\n  };\n  email: string;\n  address: FAddress;\n}\n\n/**\n * Enrollment\n */\n\nexport const enrollVal = yup\n  .object({\n    courseId: yup.number().required(),\n    contacts: contactsVal.required(),\n    evaluationNeeded: yup.boolean().required(),\n    evaluation: evaluationVal.when(\"evaluationNeeded\", thenReq(true)),\n    billingNeeded: yup.boolean().required(),\n    billing: billingVal.when(\"billingNeeded\", thenReq(true)),\n  })\n  .required();\n\nexport interface FEnroll {\n  courseId: number;\n  contacts: FContacts;\n  evaluationNeeded: boolean;\n  evaluation: FEvaluation;\n  billingNeeded: boolean;\n  billing: FBilling;\n}\n"],"names":["re","url","cf","thenReq","value","is","then","schema","required","otherwise","nullable","thenNull","urlVal","yup","string","matches","cfVal","userVal","object","email","name","surname","contactsVal","userExists","user","when","phone","evaluationVal","letterNeeded","letter","portfolioNeeded","portfolio","cvNeeded","cv","addressVal","cap","town","province","street","billingOptions","billingVal","billingOption","oneOf","me","person","company","vat","sdi","address","enrollVal","courseId","number","contacts","evaluationNeeded","evaluation","billingNeeded","billing"],"mappings":"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"}